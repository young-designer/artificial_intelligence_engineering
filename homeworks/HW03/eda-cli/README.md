# EDA CLI - Инструмент для исследовательского анализа данных

Мини-CLI для быстрого EDA (Exploratory Data Analysis) CSV-файлов с генерацией отчетов и визуализаций.

## Установка

```bash
cd eda-cli
pip install -e .
```

## Команды

### `eda-cli overview`

Быстрый обзор датасета - показывает размеры, типы колонок и базовую статистику.

```bash
eda-cli overview data/example.csv
```

**Параметры:**
- `--sep` - разделитель в CSV (по умолчанию: `,`)
- `--encoding` - кодировка файла (по умолчанию: `utf-8`)

### `eda-cli report`

Генерирует полный EDA-отчет с таблицами, графиками и анализом качества данных.

```bash
eda-cli report data/example.csv --out-dir reports
```

**Основные параметры:**
- `--out-dir` - каталог для сохранения отчета (по умолчанию: `reports`)
- `--sep` - разделитель в CSV (по умолчанию: `,`)
- `--encoding` - кодировка файла (по умолчанию: `utf-8`)

**Новые параметры настройки отчета:**
- `--title` - заголовок отчета (по умолчанию: `"EDA-отчёт"`)
- `--max-hist-columns` - максимум числовых колонок для гистограмм (по умолчанию: `6`)
- `--top-k-categories` - количество top-значений для категориальных признаков (по умолчанию: `5`)

## Примеры использования

### Базовый отчет
```bash
eda-cli report data/sales.csv
```

### Отчет с настройками
```bash
eda-cli report data/sales.csv \
  --title "Анализ продаж за 2024 год" \
  --out-dir reports/sales_2024 \
  --max-hist-columns 10 \
  --top-k-categories 8
```

### Обзор с другим разделителем
```bash
eda-cli overview data/european_data.csv --sep ";" --encoding "cp1251"
```

## Что генерирует отчет

### Файлы
- `report.md` - основной Markdown отчет
- `summary.csv` - сводка по всем колонкам
- `missing.csv` - статистика пропусков
- `correlation.csv` - корреляционная матрица
- `top_categories/*.csv` - топ-значения категориальных признаков
- `hist_*.png` - гистограммы числовых колонок
- `missing_matrix.png` - матрица пропусков
- `correlation_heatmap.png` - тепловая карта корреляций

### Анализ качества данных

Автоматически проверяются эвристики качества:
- **Константные колонки** - колонки с одинаковыми значениями
- **Подозрительные дубликаты ID** - ID-колонки с неуникальными значениями
- **Слишком много пропусков** - колонки с высокой долей пропусков
- **Размер датасета** - предупреждения о малом количестве строк/большом количестве колонок

### Влияние новых параметров

**`--title`**
- Изменяет заголовок в `report.md`
- Полезно для создания отчетов с осмысленными названиями

**`--max-hist-columns`**
- Ограничивает количество генерируемых гистограмм
- Ускоряет генерацию отчета для датасетов с большим количеством числовых колонок

**`--top-k-categories`**
- Определяет сколько топ-значений показывать для каждого категориального признака
- Влияет на размер файлов в `top_categories/` и детальность анализа

## Требования

- Python 3.11+
- pandas >= 2.3.3
- matplotlib >= 3.10.7
- typer >= 0.20.0

## Структура проекта

```
eda-cli/
├── src/eda_cli/
│   ├── cli.py      # CLI интерфейс
│   ├── core.py     # Основная логика анализа
│   └── viz.py      # Функции визуализации
├── data/           # Примеры данных
├── tests/          # Тесты
└── reports_example/ # Пример сгенерированного отчета
```